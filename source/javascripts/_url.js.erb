// Change the URL
function newURL() {
  // window.history.replaceState('', 'Modularscale',
  //   '?' + getBase() +
  //   '&' + $[thread].u +
  //   '&' + document.getElementById('ratio').value +
  //   '&' + mode +
  //   '&' + outputMode
  // );
}

// Query the URL on initial load
function queryURL() {
  var URL = window.location.search;

  // Ignore UTM codes if they exist in the URL
  // They conflict with the URL handilng of this tool
  if (URL.search('utm_') > 0) {
    return null
  }

  if (URL.search('&') > 0) {
    URL = URL.split('?')[1].split('&');
    if (URL.length = 5) {
      $[thread].b = URL[0].split(',');
      $[thread].u = URL[1];
      $[thread].r = URL[2];
      mode        = URL[3];
      outputMode  = URL[4];

      formUpdate();

      $[thread].r = revRatio($[thread].r,$[thread].b);

      msPage();
      codeMode(mode);
      outputM(outputMode);

    }
  }
}